<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cart</title>
    <link rel="stylesheet" href="css/keranjang.css">
    <link rel="stylesheet" href="css/styles.css">
</head>
<body>
    
<!-- Navigation-->
<nav class="navbar navbar-expand-lg navbar-light bg-light">
    <div class="container px-4 px-lg-5">

        <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation"><span class="navbar-toggler-icon"></span></button>
        <div class="collapse navbar-collapse" id="navbarSupportedContent">
            <ul class="nav navbar-nav">
                <li><img class="image" src="assets\brand.png"  width="auto" height="40px" style="margin: 5px;padding: 0px color white;"></li>
            </ul></b>
            <ul class="navbar-nav me-auto mb-2 mb-lg-0 ms-lg-4">
                <li class="nav-item"><a class="nav-link active" aria-current="page" href="halamanawal.html">Home</a></li>
                <li class="nav-item"><a class="nav-link" href="login.html">Profile</a></li>
                <li class="nav-item dropdown">
                    <a class="nav-link dropdown-toggle" id="navbarDropdown" href="#" role="button" data-bs-toggle="dropdown" aria-expanded="false">Shop</a>
                    <ul class="dropdown-menu" aria-labelledby="navbarDropdown">
                        <li><a class="dropdown-item" href="#!">All Products</a></li>
                        <li><hr class="dropdown-divider" /></li>
                        <li><a class="dropdown-item" href="#!">Popular Items</a></li>
                        <li><a class="dropdown-item" href="#!">New Arrivals</a></li>
                    </ul>
                </li>
            </ul>
            <form class="d-flex">
                <input class="form-control me-2" type="search" placeholder="Search" aria-label="Search">
                <button class="btn btn-outline-success" type="submit">Search</button>
            </form>
            <form class="d-flex">
                <a href="keranjang.html" class="btn btn-outline-dark">
                    <i class="bi-cart-fill me-1"></i>
                    Cart
                    <span class="badge bg-dark text-white ms-1 rounded-pill">3</span>
                </a>
            </form>                
        </div>
    </div>
</nav>

<div class="all-produk">
    <div class="detail-produk">
        <table>
            <tr>
                <th rowspan="3" class="close-box"><a href="#"><input type="checkbox" class="btn-box"></a></th>
                <th rowspan="3"><img src="assets/hodie.png" class="img-product"></th>
                <th colspan="3" height="70px" class="name-product"><p class="product-name">hoodie</p></th>
                <th class="subtotal">subtotal</th>
                <th class="close-box"  rowspan="3"><a class="btn-box" href="#">X</a></th>
            </tr>
            <tr>
                <td>size</td>
                <td>color</td>
                <td>quantity</td>
             <th>Rp.80.000</th>
            </tr>
        
            <tr class="pilihan">
                <td height="50px">
                    <select>
                        <option value="S">S</option>
                        <option value="M">M</option>
                        <option value="L">L</option>
                        <option value="XL">XL</option>
                        <option value="XXL">XXL</option>
                    </select>
                </td>
                <td>
                    <select>
                        <option value="putih">putih</option>
                        <option value="hitam">hitam</option>
                        <option value="coklat">coklat</option>
                        <option value="hijau">hijau</option>
                        <option value="naviy">naviy</option>
                    </select>
                </td>
                <td><input type="number" min="1" value="1" class="btn-jumlah"></td>
            </tr>
        </table>
    </div>

    <hr class="garis-pembatas">

    <div class="detail-produk">
        <table>
            <tr>
                <th rowspan="3" class="close-box"><a href="#"><input type="checkbox" class="btn-box"></a></th>
                <th rowspan="3"><img src="assets/blouse.png" class="img-product"></th>
                <th colspan="3" height="70px" class="name-product"><p class="product-name">blouse</p></th>
                <th class="subtotal">subtotal</th>
                <th class="close-box"  rowspan="3"><a class="btn-box" href="#">X</a></th>
            </tr>
            <tr>
                <td>size</td>
                <td>color</td>
                <td>quantity</td>
                <th>Rp.80.000</th>
            <tr class="pilihan">
                <td height="50px">
                    <select>
                        <option value="S">S</option>
                        <option value="M">M</option>
                        <option value="L">L</option>
                        <option value="XL">XL</option>
                        <option value="XXL">XXL</option>
                    </select>
                </td>
                <td>
                    <select>
                        <option value="putih">putih</option>
                        <option value="hitam">hitam</option>
                        <option value="coklat">coklat</option>
                        <option value="hijau">hijau</option>
                        <option value="naviy">naviy</option>
                    </select>
                </td>
                <td><input type="number" min="1" value="1" class="btn-jumlah"></td>
            </tr>
        </table>
    </div>

    <hr class="garis-pembatas">

    <div class="detail-produk">
        <table>
            <tr>
                <th rowspan="3" class="close-box"><a href="#"><input type="checkbox" class="btn-box"></a></th>
                <th rowspan="3"><img src="assets/dress.png" class="img-product"></th>
                <th colspan="3" height="70px" class="name-product"><span class="product-name">dress</span></th>
                <th class="subtotal">subtotal</th>
                <th class="close-box"  rowspan="3"><span class="btn-closebox">&times;</span></th>
            </tr>
            <tr>
                <td>size</td>
                <td>color</td>
                <td>quantity</td>
                <th>Rp.80.000</th>
            </tr>
            <tr class="pilihan">
                <td height="50px">
                    <select>
                        <option value="S">S</option>
                        <option value="M">M</option>
                        <option value="L">L</option>
                        <option value="XL">XL</option>
                        <option value="XXL">XXL</option>
                    </select>
                </td>
                <td>
                    <select>
                        <option value="putih">putih</option>
                        <option value="hitam">hitam</option>
                        <option value="coklat">coklat</option>
                        <option value="hijau">hijau</option>
                        <option value="naviy">naviy</option>
                    </select>
                </td>
                <td><input type="number" min="1" value="1" class="btn-jumlah"></td>
            </tr>
        </table>
    </div>

    <hr class="garis-pembatas">
    
</div>

<!-- Tambahkan ini setelah bagian terakhir dari kodingan produk Anda -->
<div class="modal" id="custom-modal">
    <div class="modal-content">
        <span class="close">&times;</span>
        <h>Detail Produk</h1>
        <div id="modal-produk-detail"></div>
        <button id="lanjutkan">Lanjutkan</button>
        <button id="batal">Batal</button>
    </div>
</div>


<nav class="btn-buy">
    <button id="tombolCheckout" disabled>Checkout</button>
</nav> 

<!-- Modal -->
<div class="modal" id="custom-modal">
    <div class="modal-content">
        <span class="close">&times;</span>
        <h2>Detail Produk</h2>
        <div id="modal-produk-detail"></div>
        <button id="lanjutkan">Lanjutkan</button>
        <button id="batal">Batal</button>
    </div>
</div>

<script>
    document.addEventListener('DOMContentLoaded', function() {
        const checkboxes = document.querySelectorAll('.btn-box');
        const checkoutButton = document.getElementById('tombolCheckout');
        const modal = document.getElementById('custom-modal');
        const modalProdukDetail = document.getElementById('modal-produk-detail');
        const lanjutkanButton = document.getElementById('lanjutkan');
        const batalButton = document.getElementById('batal');
        const closeModal = document.querySelector('.close');

        let selectedProducts = [];

        checkboxes.forEach(function(checkbox) {
            checkbox.addEventListener('change', function() {
                const checkedBoxes = document.querySelectorAll('.btn-box:checked');
                checkoutButton.disabled = checkedBoxes.length === 0;

                if (this.checked) {
                    const productName = this.parentElement.parentElement.querySelector('.product-name').textContent;
                    const productPrice = parseInt(this.parentElement.parentElement.querySelector('.subtotal').textContent.substr(3));
                    const productQuantity = parseInt(this.parentElement.parentElement.querySelector('.btn-jumlah').value);

                    selectedProducts.push({
                        name: productName,
                        price: productPrice,
                        quantity: productQuantity
                    });
                } else {
                    selectedProducts = selectedProducts.filter(product => product.name !== this.parentElement.parentElement.querySelector('.product-name').textContent);
                    if (selectedProducts.length === 0) {
                        checkoutButton.disabled = true;
                    }
                }
            });
        });

        checkoutButton.addEventListener('click', function() {
    const checkedBoxes = document.querySelectorAll('.btn-box:checked');

    if (checkedBoxes.length > 0) {
        modal.style.display = 'block';

        // Tampilkan daftar produk yang dipilih di dalam modal
        const produkDetailHTML = selectedProducts.map(function(product, index) {
            return `
                <div>
                    <p>Nama Produk: ${product.name}</p>
                    <p>Harga: Rp.${product.price}</p>
                    <p>Jumlah: ${product.quantity}</p>
                    <p>Total Harga: Rp.${product.price * product.quantity}</p>
                </div>
            `;
        }).join('');

        // Isi innerHTML dari elemen modal dengan string HTML yang berisi detail produk
        modalProdukDetail.innerHTML = produkDetailHTML;
    } else {
        alert('Pilih setidaknya satu produk sebelum checkout.');
    }
});

        closeModal.addEventListener('click', function() {
            modal.style.display = 'none';
        });

        lanjutkanButton.addEventListener('click', function() {
            // Implementasikan logika untuk melanjutkan transaksi di sini
            alert('pesanan sedang di proses!');
            modal.style.display = 'none';
            selectedProducts = [];
            checkboxes.forEach(checkbox => checkbox.checked = false);
            checkoutButton.disabled = true;
        });

        batalButton.addEventListener('click', function() {
            modal.style.display = 'none';
            selectedProducts = [];
            checkboxes.forEach(checkbox => checkbox.checked = false);
            checkoutButton.disabled = true;
        });
    });
</script>

</body>
</html>